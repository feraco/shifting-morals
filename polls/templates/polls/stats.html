{% extends 'polls/base.html' %}
{% load staticfiles %}
{% block content %}

	<nav aria-label="breadcrumb">
	  <ol class="breadcrumb">
	    <li class="breadcrumb-item"><a href="{% url 'polls:index' %}">Home</a></li>
	    <li class="breadcrumb-item"><a href="{% url 'polls:decision' %}">Scenarios</a></li>
	    <li class="breadcrumb-item active" aria-current="page">Stats</li>
	  </ol>
	</nav>

	<div class="content-container container">
		<h1 class="text-center p-4"> Stats </h1>

		{% if request.session.kill_count %}
			<p> 
				Your total kill count is {{ request.session.kill_count }}. <br>
				You've killed {{ request.session.male_kc }} male(s) versus  {{ request.session.female_kc }} female(s). <br>
				You kill {{ request.session.most_killed_age }}s the most often. <br>
				{{ request.session.social_preference }} <br>
			</p>

			<h4 class="text-center p-4"> Kills per Decision </h4>

		{% else %}
			<p> 
				No stats recorded yet! Make your first decision.
			</p>
		{% endif %}

		<!-- {{ request.session.test }} <br> {{ request.session.test2 }} <br> -->


		<canvas id="myChart" width="500" height="400"></canvas>

        <script type="text/javascript" src="http://code.jquery.com/jquery-1.10.0.min.js"></script>
        <script type="text/javascript" src="{% static 'polls/js/Chart.min.js' %}"></script>
        <script type="text/javascript">
            $.get('{% url "polls:line_chart_json" %}', function(data) {
                var ctx = $("#myChart").get(0).getContext("2d");
                new Chart(ctx, {
                    type: 'line', data: data
                });
            });
        </script>

		<div class="text-center"><a href="{% url 'polls:decision' %}">Back to scenarios</a></div>
		<br>
	</div>
{% endblock %}